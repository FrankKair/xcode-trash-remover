#!/usr/bin/env ruby
require 'fileutils'
require 'find'

module XcodeDirectories
	# DERIVED_DATA = "#{File.expand_path('~')}/Library/Developer/Xcode/DerivedData/*"
	# ARCHIVES = "#{File.expand_path('~')}/Library/Developer/Xcode/Archives/*"
	DOWNLOADS = "#{File.expand_path('~')}/Downloads/*"
end

trash_size = 0
XcodeDirectories.constants.each do |dir|
	files = Dir.glob(XcodeDirectories.const_get(dir))
	if files.empty?
		next
	end
	files.each do |folder|
		trash_size += dir_size(folder)
		FileUtils.rm_rf(folder)
	end
end

if trash_size > 0
	puts "Deleted all files from #{XcodeDirectories.constants[0]} and #{XcodeDirectories.constants[1]}"
	puts "\n#{trash_size} bytes deleted"
else
	puts "The directories are empty"
end
